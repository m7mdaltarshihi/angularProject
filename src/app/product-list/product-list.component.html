<div class="container mt-5 px-2">
  <div class="d-flex justify-content-between align-items-center p-3 mb-4 border-bottom header bg-light shadow-sm rounded">
    
    <!-- Left Section: Search Input -->
    <div class="input-group" style="width: 300px;">
        <input #txtProductNameSearch 
               type="text" 
               class="form-control" 
               placeholder="Search..." 
               aria-label="Search"
               style="border-top-left-radius: 8px; border-bottom-left-radius: 8px;"/>
        <button class="btn btn-outline-secondary" (click)="Search()" style="border-top-right-radius: 8px; border-bottom-right-radius: 8px;">
            <i class="fas fa-search"></i>
        </button>
    </div>

    <div class="d-flex align-items-center">
      <button type="button" 
        (click)="ResetFilters()"  
          class="btn btn-outline-info me-3 d-flex align-items-center" 
          style="border-radius: 8px; color: #007bff; border-color: #007bff;">
         <i class="fas fa-sync-alt me-1"></i> Reset Filters
        </button>
    </div>
    <div class="d-flex align-items-center">
      <button type="button" 
              class="btn btn-outline-danger me-3 d-flex align-items-center position-relative" 
              (click)="BelowStockThreshhold()"
              style="border-radius: 8px;">
              
        
        <span class="position-absolute top-0 start-0 translate-middle badge rounded-pill bg-danger" 
              style="font-size: 0.75rem; padding: 0.3em 0.5em;">
          {{ count }}
        </span>
        
        Products Low On Stock
      </button>
    </div>
    

    <!-- Right Section: Add Product Button -->
    <div>
      
        <button type="button" 
                routerLink="/home/newProduct" 
                class="btn btn-primary" 
                style="border-radius: 8px;">
            + Add Product
        </button>
    </div>
</div>

    <div class="">
    </div>
    <!-- Table Section -->
    <div class="table-responsive shadow rounded" style="background-color: #f8f9fa; padding: 20px;">
      <table class="table align-middle table-hover mb-0">
        <thead class="bg-light">
          <tr>
           
            <th scope="col">#</th>
            <th scope="col">Image</th>
            <th scope="col">Name</th>
            <th scope="col">SKU</th>
            <th scope="col">Stock <i class="fa-solid fa-sort" style="cursor: pointer; margin-left: 5px; color: #7f8083;" (click)="StockSort()"></i></th>
            <th scope="col">Price <i class="fa-solid fa-sort" style="cursor: pointer; margin-left: 5px; color: #7f8083;" (click)="PriceSort()"></i></th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products; let i = index">
          
            <td>{{ i + 1 }}</td> <!-- Counter starts from 1 -->
            <td><img [src]="product.image" alt="{{ product.name }}" class="img-fluid product-image" *ngIf="product.image"></td>
            <td>{{ product.name }}</td>
            <td>{{ product.sku }}</td>
            <td>{{ product.stock }}</td>
            <td>{{ product.price }}</td>
            <td>
              <div class="d-flex gap-3 icon-group">
                <i class="fa-solid fa-info text-primary icon-btn" data-bs-toggle="modal" data-bs-target="#detailsModal"></i>
                <i class="fa-solid fa-pen text-warning icon-btn" (click)="editProduct(product.productId)"></i>
                <i class="fa-solid fa-trash text-danger icon-btn" (click)="deleteProduct(product.productId)"></i>
              </div>
            </td>



            <div id="detailsModal" class="modal fade" tabindex="-1" aria-labelledby="productDetailsModal" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title" id="roleModalLabel">Product Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">

                    <div class="col-lg-12 col-md-12 mb-12">
                      <div class="card">
                        <div class="bg-image hover-zoom ripple ripple-surface ripple-surface-light"
                          data-mdb-ripple-color="light">
                          <img [src]="product.image"
                            class="w-100" />
                          <a href="#!">
                            <div class="mask">
                              <div class="d-flex justify-content-start align-items-end h-100"></div>
                            </div>
                            <div class="hover-overlay">
                              <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                            </div>
                          </a>
                        </div>
                        <div class="card-body">
                          <div class="row">
                            <div class="col-6">
                              <span  class="text-reset">
                                <h5 class="card-title mb-3">{{product.name}}</h5>
                              </span>
                            </div>
                            <div class="col-6">
                              <span class="text-reset">
                                <h5>SKU: {{[product.sku]}}</h5>
                              </span>
                            </div>
                          </div>
                          <div class="row">
                            
                            <div class="col-12">
                              <span class="text-reset">
                                <h5>Description: </h5><p>{{product.description}}</p>
                              </span>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-6">
                              <h6 class="mb-3">Price: {{product.price | currency}}</h6>

                            </div>
                            <div class="col-6">
                              <h6 class="mb-3">Available:  {{product.stock }}</h6>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                  </div>
                  <div class="modal-footer">
                    <div class="d-flex justify-content-center gap-3">
                      <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-outline-danger" (click)="deleteProduct(product.productId)" data-bs-dismiss="modal">Delete</button>
                    </div>
                  </div>
                  
                </div>
              </div>
            </div>

          </tr>          
          <!-- Repeat rows as needed -->
        </tbody>
      </table>
    </div>
  </div>
  